<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Traffic Light Simulation</title>

<style>
body {
  background: #1e1e1e;
  font-family: Arial, sans-serif;
  color: white;
}

.scene { margin: 40px; }

.traffic-container {
  display: flex;
  align-items: center;
}

/* Traffic Light */
.traffic-light {
  background: #333;
  padding: 12px;
  border-radius: 10px;
}

.light {
  width: 40px;
  height: 40px;
  background: black;
  border-radius: 50%;
  margin: 10px 0;
}

.red.active {
  background: red;
  box-shadow: 0 0 25px red;
}
.yellow.active {
  background: yellow;
  box-shadow: 0 0 25px yellow;
}
.green.active {
  background: lime;
  box-shadow: 0 0 25px lime;
}

#message {
  margin-left: 20px;
  font-size: 24px;
  font-weight: bold;
}

/* Road */
.road {
  position: relative;
  margin-top: 50px;
  height: 160px;
  background: #555;
  overflow: hidden;
}

/* Stop line */
.stop-line {
  position: absolute;
  left: 260px;
  top: 0;
  width: 6px;
  height: 100%;
  background: white;
}

/* Vehicles */
.vehicle {
  position: absolute;
  right: -140px;
  background-repeat: no-repeat;
  background-size: contain;
}

/* Lane positions (SIDE BY SIDE) */
.lane1 { top: 25px; }
.lane2 { top: 70px; }
.lane3 { top: 115px; }

/* Car */
.car {
  width: 80px;
  height: 40px;
  background-image: url("data:image/svg+xml;utf8,\
<svg xmlns='http://www.w3.org/2000/svg' width='80' height='40'>\
<rect x='5' y='15' width='70' height='18' rx='4' fill='blue'/>\
<rect x='20' y='5' width='30' height='15' rx='3' fill='lightblue'/>\
<circle cx='20' cy='35' r='5' fill='black'/>\
<circle cx='60' cy='35' r='5' fill='black'/>\
</svg>");
}

/* Bike */
.bike {
  width: 60px;
  height: 30px;
  background-image: url("data:image/svg+xml;utf8,\
<svg xmlns='http://www.w3.org/2000/svg' width='60' height='30'>\
<circle cx='10' cy='20' r='6' fill='black'/>\
<circle cx='50' cy='20' r='6' fill='black'/>\
<line x1='10' y1='20' x2='30' y2='10' stroke='white' stroke-width='2'/>\
<line x1='30' y1='10' x2='50' y2='20' stroke='white' stroke-width='2'/>\
</svg>");
}
</style>
</head>

<body>

<div class="scene">
  <div class="traffic-container">
    <div class="traffic-light">
      <div class="light red"></div>
      <div class="light yellow"></div>
      <div class="light green"></div>
    </div>
    <div id="message">STOP</div>
  </div>

  <div class="road">
    <div class="stop-line"></div>

    <!-- SIDE BY SIDE VEHICLES -->
    <div class="vehicle car lane1"></div>
    <div class="vehicle bike lane2"></div>
    <div class="vehicle car lane3"></div>
  </div>
</div>

<script>
const red = document.querySelector('.red');
const yellow = document.querySelector('.yellow');
const green = document.querySelector('.green');
const message = document.getElementById('message');
const vehicles = document.querySelectorAll('.vehicle');

let lightState = 0;
let baseX = -140;
const stopPoint = 260;

/* Traffic light cycle */
function changeSignal() {
  red.classList.remove('active');
  yellow.classList.remove('active');
  green.classList.remove('active');

  if (lightState === 0) {
    red.classList.add('active');
    message.innerText = "STOP";
  } else if (lightState === 1) {
    yellow.classList.add('active');
    message.innerText = "WAIT";
  } else {
    green.classList.add('active');
    message.innerText = "GO";
  }

  lightState = (lightState + 1) % 3;
}

setInterval(changeSignal, 3000);
changeSignal();

/* Vehicle movement */
function moveVehicles() {

  /* STOP on RED & YELLOW */
  if (red.classList.contains('active') || yellow.classList.contains('active')) {
    if (baseX < stopPoint - 140) {
      baseX += 0.8;
    }
  }

  /* MOVE on GREEN */
  if (green.classList.contains('active')) {
    baseX += 2;
  }

  vehicles.forEach(v => {
    v.style.right = baseX + "px";
  });

  if (baseX > window.innerWidth + 200) {
    baseX = -140;
  }

  requestAnimationFrame(moveVehicles);
}

moveVehicles();
</script>

</body>
</html>
