<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Temple Run Game</title>

<style>
body {
  margin: 0;
  background: radial-gradient(#000, #111);
  display: flex;
  justify-content: center;
  align-items: center;
  height: 100vh;
}

#game {
  width: 400px;
  height: 600px;
  position: relative;
  overflow: hidden;
  border-radius: 14px;
  perspective: 900px;
  background: linear-gradient(#2b6b4f, #000);
}

/* ROAD (3D ILLUSION) */
#road {
  position: absolute;
  bottom: -200px;
  width: 100%;
  height: 800px;
  background: repeating-linear-gradient(
    to bottom,
    rgba(255,255,255,0.15) 0 25px,
    transparent 25px 50px
  );
  transform: rotateX(65deg);
  animation: moveRoad 1s linear infinite;
}

@keyframes moveRoad {
  from { background-position: 0 0; }
  to { background-position: 0 50px; }
}

/* PLAYER */
#player {
  width: 50px;
  height: 50px;
  background: radial-gradient(circle, gold, orange);
  position: absolute;
  bottom: 40px;
  left: 175px;
  border-radius: 50%;
  transition: left 0.2s;
  z-index: 6;
}

/* JUMP */
.jump {
  animation: jump 0.6s ease-out;
}
@keyframes jump {
  0% { bottom: 40px; }
  50% { bottom: 190px; }
  100% { bottom: 40px; }
}

/* OBJECTS */
.object {
  width: 40px;
  height: 40px;
  position: absolute;
  top: -60px;
  border-radius: 10px;
  transform: scale(0.6);
  z-index: 5;
}

.coin {
  background: radial-gradient(circle, gold, orange);
  border-radius: 50%;
}

.obstacle {
  background: linear-gradient(45deg, crimson, darkred);
}

.shield {
  background: linear-gradient(45deg, cyan, blue);
}

.boost {
  background: linear-gradient(45deg, violet, purple);
}

/* HUD */
#hud {
  position: absolute;
  top: 10px;
  left: 10px;
  color: white;
  font-family: Arial;
  z-index: 10;
}

/* GAME OVER */
#gameOver {
  position: absolute;
  inset: 0;
  background: rgba(0,0,0,0.85);
  display: none;
  justify-content: center;
  align-items: center;
  flex-direction: column;
  color: white;
  font-size: 26px;
  z-index: 20;
}
</style>
</head>

<body>

<div id="game">
  <div id="road"></div>
  <div id="player"></div>

  <div id="hud">
    Score: <span id="score">0</span><br>
    High: <span id="high">0</span><br>
    Coins: <span id="coins">0</span>
  </div>

  <div id="gameOver">
    <div>Game Over</div>
    <button onclick="location.reload()">Restart</button>
  </div>
</div>

<script>
const player = document.getElementById("player");
const scoreEl = document.getElementById("score");
const highEl = document.getElementById("high");
const coinsEl = document.getElementById("coins");
const gameOverScreen = document.getElementById("gameOver");

const lanes = [75, 175, 275];
let lane = 1;

let score = 0;
let coins = 0;
let speed = 6;
let isJumping = false;
let shieldActive = false;
let gameOver = false;

/* HIGH SCORE */
let highScore = localStorage.getItem("templeHigh") || 0;
highEl.textContent = highScore;

/* CONTROLS */
document.addEventListener("keydown", e => {
  if (e.code === "ArrowLeft" && lane > 0) lane--;
  if (e.code === "ArrowRight" && lane < 2) lane++;
  if (e.code === "Space" && !isJumping) jump();
  player.style.left = lanes[lane] + "px";
});

function jump() {
  isJumping = true;
  player.classList.add("jump");
  setTimeout(() => {
    player.classList.remove("jump");
    isJumping = false;
  }, 600);
}

/* SPAWN OBJECTS */
function spawn(type) {
  if (gameOver) return;

  const obj = document.createElement("div");
  obj.classList.add("object", type);
  obj.style.left = lanes[Math.floor(Math.random() * 3)] + "px";
  document.getElementById("game").appendChild(obj);

  let top = -60, scale = 0.5;

  const move = setInterval(() => {
    top += speed;
    scale += 0.01;
    obj.style.top = top + "px";
    obj.style.transform = `scale(${scale})`;

    const p = player.getBoundingClientRect();
    const o = obj.getBoundingClientRect();

    if (
      o.bottom > p.top &&
      o.top < p.bottom &&
      o.left < p.right &&
      o.right > p.left
    ) {
      if (type === "coin") coins++;
      else if (type === "shield") activateShield();
      else if (type === "boost") activateBoost();
      else if (!shieldActive) endGame();

      coinsEl.textContent = coins;
      obj.remove();
      clearInterval(move);
    }

    if (top > 600) {
      obj.remove();
      clearInterval(move);
    }
  }, 20);
}

/* POWER UPS */
function activateShield() {
  shieldActive = true;
  player.style.boxShadow = "0 0 20px cyan";
  setTimeout(() => {
    shieldActive = false;
    player.style.boxShadow = "";
  }, 5000);
}

function activateBoost() {
  speed = 10;
  setTimeout(() => speed = 6, 4000);
}

/* SPAWN LOOPS */
setInterval(() => spawn("obstacle"), 1200);
setInterval(() => spawn("coin"), 900);
setInterval(() => spawn("shield"), 9000);
setInterval(() => spawn("boost"), 11000);

/* SCORE */
setInterval(() => {
  if (!gameOver) {
    score++;
    scoreEl.textContent = score;

    if (score > highScore) {
      highScore = score;
      localStorage.setItem("templeHigh", highScore);
      highEl.textContent = highScore;
    }
  }
}, 100);

function endGame() {
  gameOver = true;
  gameOverScreen.style.display = "flex";
}
</script>

</body>
</html>
